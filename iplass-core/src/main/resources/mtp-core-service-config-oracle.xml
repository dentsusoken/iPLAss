<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE serviceDefinition>
<serviceDefinition>
	<inherits>/mtp-core-service-config.xml</inherits>

	<!-- Rdb Connection Settings -->
	<service>
		<interface>org.iplass.mtp.impl.rdb.connection.ConnectionFactory</interface>
		<!-- Driver Managed Connection -->
		<!-- 
		<class>org.iplass.mtp.impl.rdb.connection.DriverManagerConnectionFactory</class>
		<property name="url" value="jdbc:oracle:thin:@[host]:[port]/[serviceName]" />
		<property name="user" value="[user]" />
		<property name="password" value="[password]" />
		<property name="driver" value="oracle.jdbc.driver.OracleDriver" />
		-->

		<!-- DataSource Connection -->
		<!--
		<class>org.iplass.mtp.impl.rdb.connection.DataSourceConnectionFactory</class>
		<property name="dataSourceName" value="java:comp/env/jdbc/defaultDS" />
		-->
		<property name="warnLogThreshold" value="0" />

		<!-- clientInfo mapping -->
		<property name="clientInfoMap">
			<property name="OCSID.ECID" value="traceId" />
			<property name="OCSID.CLIENTID" value="thread" />
			<property name="OCSID.ACTION" value="command" />
		</property>
		<property name="clientInfoMaxLength" value="64" />
	</service>
	<service>
		<interface>org.iplass.mtp.impl.rdb.adapter.RdbAdapterService</interface>

		<!--
			for oracle
			::configable property::
				lockTimeout :
					(seconds), 0=for update no wait, -1=for update
				enableInPartitioning :
					enables IN clause's limitation avoidance (do partition IN clause by 1000 items unit).
				escapeFullwidthWildcard :
					when use oracle11gR2patch2(11.2.0.2.0) or before, set true this property
				optimizerHint :
					default hint clause of SQL generated by EQL.
				useFetchFirstClause :
					use FETCH FIRST clause rather than use ROWNUM (on oracle 12c). 
		-->
		<property name="adapter" class="org.iplass.mtp.impl.rdb.oracle.OracleRdbAdapter" inherit="false">
			<property name="lockTimeout" value="0" />
			<property name="enableInPartitioning" value="false" />
			<property name="escapeFullwidthWildcard" value="false" />
			<property name="optimizerHint" value="FIRST_ROWS(100)" />
			<property name="alwaysBind" value="true" />
			<property name="thresholdCountOfUsePrepareStatement" value="50" />
			<property name="batchSize" value="100" />
			<property name="defaultQueryTimeout" value="0" />
			<property name="useFetchFirstClause" value="true" />
		</property>
	</service>
	
</serviceDefinition>
